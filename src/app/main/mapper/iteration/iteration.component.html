<div appCypressData="mapping-wrapper">
  <div *ngFor="let mapping of triples; let index = index" fxLayout="row" fxLayoutAlign="start stretch" appCypressData="triple-wrapper">
    <div [fxFlex]="97" [ngClass]="{'triples-blocks-subrow': mapping.isIRI}">
      <div class="triples-block">
        <app-mapper-cell [cellMapping]="mapping.getSubject()"
                         [isFirstChild]="isFirstSubject(mapping, index)"
                         [tabIndex]="index" [tabPosition]="1"
                         [cellType]="SUBJECT"
                         [namespaces]="getAllNamespaces()"
                         [sources]="sources"
                         (onDrop)="onDrop($event, mapping, SUBJECT, index)"
                         (onDelete)="onDelete($event, mapping, SUBJECT)"
                         (onValueSet)="onValueSet($event, mapping, SUBJECT, index)"
                         (onEditClick)="openMapperDialog($event, mapping, SUBJECT, index)"
                         [attr.appCypressData]="'subject-' + index"
                         [fxFlex]="33"></app-mapper-cell>
        <app-mapper-cell [cellMapping]="mapping.getPredicate()"
                         [isTypeProperty]="mapping.isTypeProperty"
                         [isFirstChild]="isFirstPredicate(mapping, index)"
                         [cellType]="PREDICATE"
                         [namespaces]="getAllNamespaces()"
                         [sources]="sources"
                         [tabIndex]="index" [tabPosition]="2"
                         (onDrop)="onDrop($event, mapping, PREDICATE, index)"
                         (onDelete)="onDelete($event, mapping, PREDICATE)"
                         (onValueSet)="onValueSet($event, mapping, PREDICATE, index)"
                         (onEditClick)="openMapperDialog($event, mapping, PREDICATE, index)"
                         [attr.appCypressData]="'predicate-' + index"
                         [fxFlex]="33"></app-mapper-cell>
        <app-mapper-cell [cellMapping]="mapping.getObject()"
                         [isTypeObject]="mapping.isTypeProperty"
                         [cellType]="OBJECT"
                         [tabIndex]="index" [tabPosition]="3"
                         [namespaces]="getAllNamespaces()"
                         [sources]="sources"
                         (onDrop)="onDrop($event, mapping, OBJECT, index)"
                         (onDelete)="onDelete($event, mapping, OBJECT)"
                         (onValueSet)="onValueSet($event, mapping, OBJECT, index)"
                         (onEditClick)="openMapperDialog($event, mapping, OBJECT, index)"
                         [attr.appCypressData]="'object-' + index"
                         [fxFlex]="33"></app-mapper-cell>
      </div>
    </div>

    <div [fxFlex]="3">
      <div>
        <span class="btn btn-link text-muted delete-triple" *ngIf="isDeleteApplicable(index)">
			    <span class="icon-trash" (click)="deleteTripleMapping(mapping)" matTooltip="{{'TOOLTIPS.DELETE_TRIPLE' | translate}}"></span>
			  </span>
      </div>

      <div>
        <span class="btn btn-link text-muted add-sibling" *ngIf="isInsertApplicable(index)">
			    <span class="icon-plus" (click)="insertMapping($event, mapping, index)" matTooltip="{{'TOOLTIPS.ADD_TRIPLE' | translate}}"></span>
			  </span>
      </div>

      <div>
        <span class="btn btn-link text-muted add-nested" *ngIf="isNestApplicable(index)">
			    <span class="icon-arrow-right" (click)="continueMapping($event, mapping, index)" matTooltip="{{'TOOLTIPS.ADD_NESTED_TRIPLE' | translate}}"></span>
			  </span>
      </div>
      &nbsp;
    </div>
  </div>
</div>
